<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.meiliwan.emall.oms.dao.RetordDao">
    <resultMap id="BaseResultMap" type="com.meiliwan.emall.oms.bean.Retord">
        <id column="retord_order_id" property="retordOrderId" jdbcType="VARCHAR"/>
        <result column="old_order_id" property="oldOrderId" jdbcType="VARCHAR"/>
        <result column="create_type" property="createType" jdbcType="INTEGER"/>
        <result column="apply_comments" property="applyComments" jdbcType="VARCHAR"/>
        <result column="ret_pay_fare" property="retPayFare" jdbcType="DECIMAL"/>
        <result column="ret_pay_amount" property="retPayAmount" jdbcType="DECIMAL"/>
        <result column="ret_pay_compensate" property="retPayCompensate" jdbcType="DECIMAL"/>
        <result column="ret_total_amount" property="retTotalAmount" jdbcType="DECIMAL"/>
        <result column="ret_real_card_amount" property="retRealCardAmount" jdbcType="DECIMAL"/>
        <result column="ret_real_mlw_amount" property="retRealMlwAmount" jdbcType="DECIMAL"/>
        <result column="upload_pic" property="uploadPic" jdbcType="VARCHAR"/>
        <result column="user_retord_desc" property="userRetordDesc" jdbcType="VARCHAR"/>
        <result column="ret_time" property="retTime" jdbcType="TIMESTAMP"/>
        <result column="uid" property="uid" jdbcType="INTEGER"/>
        <result column="user_name" property="userName" jdbcType="VARCHAR"/>
        <result column="ad_recv_name" property="adRecvName" jdbcType="VARCHAR"/>
        <result column="ad_province" property="adProvince" jdbcType="VARCHAR"/>
        <result column="ad_province_code" property="adProvinceCode" jdbcType="VARCHAR"/>
        <result column="ad_city" property="adCity" jdbcType="VARCHAR"/>
        <result column="ad_city_code" property="adCityCode" jdbcType="VARCHAR"/>
        <result column="ad_county" property="adCounty" jdbcType="VARCHAR"/>
        <result column="ad_mobile" property="adMobile" jdbcType="VARCHAR"/>
        <result column="ad_county_code" property="adCountyCode" jdbcType="VARCHAR"/>
        <result column="ad_town" property="adTown" jdbcType="VARCHAR"/>
        <result column="ad_town_code" property="adTownCode" jdbcType="VARCHAR"/>
        <result column="ad_detail_addr" property="adDetailAddr" jdbcType="VARCHAR"/>
        <result column="ad_phone" property="adPhone" jdbcType="VARCHAR"/>
        <result column="update_time" property="updateTime" jdbcType="TIMESTAMP"/>
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
        <result column="state" property="state" jdbcType="INTEGER"/>
        <result column="remark" property="remark" jdbcType="VARCHAR"/>
        <result column="ret_type" property="retType" jdbcType="VARCHAR"/>
        <result column="ret_pay_type" property="retPayType" jdbcType="VARCHAR"/>
        <result column="user_ret_type" property="userRetType" jdbcType="VARCHAR"/>
        <result column="service_ret_alipay" property="serviceRetAlipay" jdbcType="VARCHAR"/>
        <result column="service_ret_alipay_name" property="serviceRetAlipayName" jdbcType="VARCHAR"/>
        <result column="service_ret_bank" property="serviceRetBank" jdbcType="VARCHAR"/>
        <result column="service_ret_card_num" property="serviceRetCardNum" jdbcType="VARCHAR"/>
        <result column="service_ret_card_name" property="serviceRetCardName" jdbcType="VARCHAR"/>
        <result column="service_ret_open_bank" property="serviceRetOpenBank" jdbcType="VARCHAR"/>
        <result column="ret_status" property="retStatus" jdbcType="VARCHAR"/>
        <result column="is_end_node" property="isEndNode" jdbcType="INTEGER"/>
    </resultMap>
    <resultMap id="RetOrdResultMap" type="com.meiliwan.emall.oms.dto.export.RetOrdReportRow" >
    	<result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
    	<result column="retord_order_id" property="retordOrderId" jdbcType="VARCHAR"/>
    	<result column="old_order_id" property="oldOrderId" jdbcType="VARCHAR"/>
    	<result column="pro_id" property="proId" jdbcType="INTEGER"/>
    	<result column="pro_bar_code" property="proBarCode" jdbcType="VARCHAR"/>
    	<result column="pro_name" property="proName" jdbcType="VARCHAR"/>
    	<result column="uint_price" property="prodTotalAmount" jdbcType="DECIMAL"/>
    	<result column="sale_num" property="saleNum" jdbcType="INTEGER"/>
    	<result column="ret_pay_fare" property="retPayFare" jdbcType="DECIMAL"/>
    	<result column="ret_pay_compensate" property="retPayCompensate" jdbcType="DECIMAL"/>
    	<result column="ret_total_amount" property="retTotalAmount" jdbcType="DECIMAL"/>
    	<result column="is_end_node" property="isEndNode" jdbcType="INTEGER"/>
    </resultMap>
    
    <sql id="Base_Column_List">
    retord_order_id, old_order_id, create_type, apply_comments, ret_pay_fare, ret_pay_amount,
    ret_pay_compensate, ret_total_amount,ret_real_card_amount,ret_real_mlw_amount, upload_pic, user_retord_desc, ret_time, uid,
    user_name, ad_recv_name, ad_province, ad_province_code, ad_city, ad_city_code, ad_county, 
    ad_mobile, ad_county_code, ad_town, ad_town_code, ad_detail_addr, ad_phone, update_time, 
    create_time, state, remark, ret_type,ret_pay_type, user_ret_type, service_ret_alipay, service_ret_alipay_name, service_ret_bank, service_ret_card_num,
    service_ret_card_name, service_ret_open_bank,ret_status,is_end_node
  </sql>
    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer">
        select
        <include refid="Base_Column_List"/>
        from oms_retord
        where retord_order_id = #{retordOrderId,jdbcType=VARCHAR}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    delete from oms_retord
    where retord_order_id = #{retordOrderId,jdbcType=VARCHAR}
  </delete>
    <insert id="insert" parameterType="com.meiliwan.emall.oms.bean.Retord">
    insert into oms_retord ( retord_order_id, old_order_id,
      create_type, apply_comments, ret_pay_fare, 
      ret_pay_amount, ret_pay_compensate, ret_total_amount, ret_real_card_amount, ret_real_mlw_amount,
      upload_pic, user_retord_desc, ret_time, 
      uid, user_name, ad_recv_name, 
      ad_province, ad_province_code, ad_city, 
      ad_city_code, ad_county, ad_mobile, 
      ad_county_code, ad_town, ad_town_code, 
      ad_detail_addr, ad_phone, update_time, 
      create_time, state, remark, 
      ret_type,ret_pay_type, user_ret_type,service_ret_alipay, service_ret_alipay_name, service_ret_bank,
      service_ret_card_num, service_ret_card_name, 
      service_ret_open_bank,ret_status , is_end_node)
    values (  #{retordOrderId,jdbcType=VARCHAR}, #{oldOrderId,jdbcType=VARCHAR},
      #{createType,jdbcType=INTEGER}, #{applyComments,jdbcType=VARCHAR}, #{retPayFare,jdbcType=DECIMAL}, 
      #{retPayAmount,jdbcType=DECIMAL}, #{retPayCompensate,jdbcType=DECIMAL}, #{retTotalAmount,jdbcType=DECIMAL},
      #{retRealCardAmount,jdbcType=DECIMAL},
      #{uploadPic,jdbcType=VARCHAR}, #{userRetordDesc,jdbcType=VARCHAR}, #{retTime,jdbcType=TIMESTAMP},
      #{uid,jdbcType=INTEGER}, #{userName,jdbcType=VARCHAR}, #{adRecvName,jdbcType=VARCHAR}, 
      #{adProvince,jdbcType=VARCHAR}, #{adProvinceCode,jdbcType=VARCHAR}, #{adCity,jdbcType=VARCHAR}, 
      #{adCityCode,jdbcType=VARCHAR}, #{adCounty,jdbcType=VARCHAR}, #{adMobile,jdbcType=VARCHAR}, 
      #{adCountyCode,jdbcType=VARCHAR}, #{adTown,jdbcType=VARCHAR}, #{adTownCode,jdbcType=VARCHAR}, 
      #{adDetailAddr,jdbcType=VARCHAR}, #{adPhone,jdbcType=VARCHAR}, #{updateTime,jdbcType=TIMESTAMP}, 
      #{createTime,jdbcType=TIMESTAMP}, #{state,jdbcType=VARCHAR}, #{remark,jdbcType=VARCHAR},
      #{retType,jdbcType=VARCHAR},#{retPayType,jdbcType=VARCHAR}, #{userRetType,jdbcType=VARCHAR}, #{serviceRetAlipay,jdbcType=VARCHAR},#{serviceRetAlipayName,jdbcType=VARCHAR}, #{serviceRetBank,jdbcType=VARCHAR},
      #{serviceRetCardNum,jdbcType=VARCHAR}, #{serviceRetCardName,jdbcType=VARCHAR}, 
      #{serviceRetOpenBank,jdbcType=VARCHAR},#{retStatus,jdbcType=VARCHAR},#{isEndNode,jdbcType=INTEGER})
  </insert>
    <insert id="insertSelective" parameterType="com.meiliwan.emall.oms.bean.Retord">
        insert into oms_retord
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="retordOrderId != null">
                retord_order_id,
            </if>
            <if test="oldOrderId != null">
                old_order_id,
            </if>
            <if test="createType != null">
                create_type,
            </if>
            <if test="applyComments != null">
                apply_comments,
            </if>
            <if test="retPayFare != null">
                ret_pay_fare,
            </if>
            <if test="retPayAmount != null">
                ret_pay_amount,
            </if>
            <if test="retPayCompensate != null">
                ret_pay_compensate,
            </if>
            <if test="retTotalAmount != null">
                ret_total_amount,
            </if>
            <if test="retRealCardAmount != null">
                ret_real_card_amount,
            </if>
            <if test="retRealMlwAmount != null">
                ret_real_mlw_amount,
            </if>

            <if test="uploadPic != null">
                upload_pic,
            </if>
            <if test="userRetordDesc != null">
                user_retord_desc,
            </if>
            <if test="retTime != null">
                ret_time,
            </if>
            <if test="uid != null">
                uid,
            </if>
            <if test="userName != null">
                user_name,
            </if>
            <if test="adRecvName != null">
                ad_recv_name,
            </if>
            <if test="adProvince != null">
                ad_province,
            </if>
            <if test="adProvinceCode != null">
                ad_province_code,
            </if>
            <if test="adCity != null">
                ad_city,
            </if>
            <if test="adCityCode != null">
                ad_city_code,
            </if>
            <if test="adCounty != null">
                ad_county,
            </if>
            <if test="adMobile != null">
                ad_mobile,
            </if>
            <if test="adCountyCode != null">
                ad_county_code,
            </if>
            <if test="adTown != null">
                ad_town,
            </if>
            <if test="adTownCode != null">
                ad_town_code,
            </if>
            <if test="adDetailAddr != null">
                ad_detail_addr,
            </if>
            <if test="adPhone != null">
                ad_phone,
            </if>
            <if test="updateTime != null">
                update_time,
            </if>
            <if test="createTime != null">
                create_time,
            </if>
            <if test="state != null">
                state,
            </if>
            <if test="remark != null">
                remark,
            </if>
            <if test="retType != null">
                ret_type,
            </if>
            <if test="retPayType != null">
                ret_pay_type,
            </if>
            <if test="userRetType != null">
                user_ret_type,
            </if>
            <if test="serviceRetAlipay != null">
                service_ret_alipay,
            </if>
            <if test="serviceRetAlipayName != null">
                service_ret_alipay_name,
            </if>
            <if test="serviceRetBank != null">
                service_ret_bank,
            </if>
            <if test="serviceRetCardNum != null">
                service_ret_card_num,
            </if>
            <if test="serviceRetCardName != null">
                service_ret_card_name,
            </if>
            <if test="serviceRetOpenBank != null">
                service_ret_open_bank,
            </if>
            <if test="retStatus != null">
                ret_status ,
            </if>
            <if test="isEndNode != null">
                is_end_node ,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="retordOrderId != null">
                #{retordOrderId,jdbcType=VARCHAR},
            </if>
            <if test="oldOrderId != null">
                #{oldOrderId,jdbcType=VARCHAR},
            </if>
            <if test="createType != null">
                #{createType,jdbcType=INTEGER},
            </if>
            <if test="applyComments != null">
                #{applyComments,jdbcType=VARCHAR},
            </if>
            <if test="retPayFare != null">
                #{retPayFare,jdbcType=DECIMAL},
            </if>
            <if test="retPayAmount != null">
                #{retPayAmount,jdbcType=DECIMAL},
            </if>
            <if test="retPayCompensate != null">
                #{retPayCompensate,jdbcType=DECIMAL},
            </if>
            <if test="retTotalAmount != null">
                #{retTotalAmount,jdbcType=DECIMAL},
            </if>
            <if test="retRealCardAmount != null">
                #{retRealCardAmount,jdbcType=DECIMAL},
            </if>
            <if test="retRealMlwAmount != null">
                #{retRealMlwAmount,jdbcType=DECIMAL},
            </if>
            <if test="uploadPic != null">
                #{uploadPic,jdbcType=VARCHAR},
            </if>
            <if test="userRetordDesc != null">
                #{userRetordDesc,jdbcType=VARCHAR},
            </if>
            <if test="retTime != null">
                #{retTime,jdbcType=TIMESTAMP},
            </if>
            <if test="uid != null">
                #{uid,jdbcType=INTEGER},
            </if>
            <if test="userName != null">
                #{userName,jdbcType=VARCHAR},
            </if>
            <if test="adRecvName != null">
                #{adRecvName,jdbcType=VARCHAR},
            </if>
            <if test="adProvince != null">
                #{adProvince,jdbcType=VARCHAR},
            </if>
            <if test="adProvinceCode != null">
                #{adProvinceCode,jdbcType=VARCHAR},
            </if>
            <if test="adCity != null">
                #{adCity,jdbcType=VARCHAR},
            </if>
            <if test="adCityCode != null">
                #{adCityCode,jdbcType=VARCHAR},
            </if>
            <if test="adCounty != null">
                #{adCounty,jdbcType=VARCHAR},
            </if>
            <if test="adMobile != null">
                #{adMobile,jdbcType=VARCHAR},
            </if>
            <if test="adCountyCode != null">
                #{adCountyCode,jdbcType=VARCHAR},
            </if>
            <if test="adTown != null">
                #{adTown,jdbcType=VARCHAR},
            </if>
            <if test="adTownCode != null">
                #{adTownCode,jdbcType=VARCHAR},
            </if>
            <if test="adDetailAddr != null">
                #{adDetailAddr,jdbcType=VARCHAR},
            </if>
            <if test="adPhone != null">
                #{adPhone,jdbcType=VARCHAR},
            </if>
            <if test="updateTime != null">
                #{updateTime,jdbcType=TIMESTAMP},
            </if>
            <if test="createTime != null">
                #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="state != null">
                #{state,jdbcType=INTEGER},
            </if>
            <if test="remark != null">
                #{remark,jdbcType=VARCHAR},
            </if>
            <if test="retType != null">
                #{retType,jdbcType=VARCHAR},
            </if>
            <if test="retPayType != null">
                #{retPayType,jdbcType=VARCHAR},
            </if>
            <if test="userRetType != null">
                #{userRetType,jdbcType=VARCHAR},
            </if>
            <if test="serviceRetAlipay != null">
                #{serviceRetAlipay,jdbcType=VARCHAR},
            </if>
            <if test="serviceRetAlipayName != null">
                #{serviceRetAlipayName,jdbcType=VARCHAR},
            </if>
            <if test="serviceRetBank != null">
                #{serviceRetBank,jdbcType=VARCHAR},
            </if>
            <if test="serviceRetCardNum != null">
                #{serviceRetCardNum,jdbcType=VARCHAR},
            </if>
            <if test="serviceRetCardName != null">
                #{serviceRetCardName,jdbcType=VARCHAR},
            </if>
            <if test="serviceRetOpenBank != null">
                #{serviceRetOpenBank,jdbcType=VARCHAR},
            </if>
            <if test="retStatus != null">
                #{retStatus,jdbcType=VARCHAR},
            </if>
            <if test="isEndNode != null">
                #{isEndNode,jdbcType=INTEGER},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.meiliwan.emall.oms.bean.Retord">
        update oms_retord
        <set>
            <if test="oldOrderId != null">
                old_order_id = #{oldOrderId,jdbcType=VARCHAR},
            </if>
            <if test="createType != null">
                create_type = #{createType,jdbcType=INTEGER},
            </if>
            <if test="applyComments != null">
                apply_comments = #{applyComments,jdbcType=VARCHAR},
            </if>
            <if test="retPayFare != null">
                ret_pay_fare = #{retPayFare,jdbcType=DECIMAL},
            </if>
            <if test="retPayAmount != null">
                ret_pay_amount = #{retPayAmount,jdbcType=DECIMAL},
            </if>
            <if test="retPayCompensate != null">
                ret_pay_compensate = #{retPayCompensate,jdbcType=DECIMAL},
            </if>
            <if test="retTotalAmount != null">
                ret_total_amount = #{retTotalAmount,jdbcType=DECIMAL},
            </if>
            <if test="retRealCardAmount != null">
                ret_real_card_amount = #{retRealCardAmount,jdbcType=DECIMAL},
            </if>
            <if test="retRealMlwAmount != null">
                ret_real_mlw_amount = #{retRealMlwAmount,jdbcType=DECIMAL},
            </if>
            <if test="uploadPic != null">
                upload_pic = #{uploadPic,jdbcType=VARCHAR},
            </if>
            <if test="userRetordDesc != null">
                user_retord_desc = #{userRetordDesc,jdbcType=VARCHAR},
            </if>
            <if test="retTime != null">
                ret_time = #{retTime,jdbcType=TIMESTAMP},
            </if>
            <if test="uid != null">
                uid = #{uid,jdbcType=INTEGER},
            </if>
            <if test="userName != null">
                user_name = #{userName,jdbcType=VARCHAR},
            </if>
            <if test="adRecvName != null">
                ad_recv_name = #{adRecvName,jdbcType=VARCHAR},
            </if>
            <if test="adProvince != null">
                ad_province = #{adProvince,jdbcType=VARCHAR},
            </if>
            <if test="adProvinceCode != null">
                ad_province_code = #{adProvinceCode,jdbcType=VARCHAR},
            </if>
            <if test="adCity != null">
                ad_city = #{adCity,jdbcType=VARCHAR},
            </if>
            <if test="adCityCode != null">
                ad_city_code = #{adCityCode,jdbcType=VARCHAR},
            </if>
            <if test="adCounty != null">
                ad_county = #{adCounty,jdbcType=VARCHAR},
            </if>
            <if test="adMobile != null">
                ad_mobile = #{adMobile,jdbcType=VARCHAR},
            </if>
            <if test="adCountyCode != null">
                ad_county_code = #{adCountyCode,jdbcType=VARCHAR},
            </if>
            <if test="adTown != null">
                ad_town = #{adTown,jdbcType=VARCHAR},
            </if>
            <if test="adTownCode != null">
                ad_town_code = #{adTownCode,jdbcType=VARCHAR},
            </if>
            <if test="adDetailAddr != null">
                ad_detail_addr = #{adDetailAddr,jdbcType=VARCHAR},
            </if>
            <if test="adPhone != null">
                ad_phone = #{adPhone,jdbcType=VARCHAR},
            </if>
            <if test="updateTime != null">
                update_time = #{updateTime,jdbcType=TIMESTAMP},
            </if>
            <if test="createTime != null">
                create_time = #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="state != null">
                state = #{state,jdbcType=INTEGER},
            </if>
            <if test="remark != null">
                remark = #{remark,jdbcType=VARCHAR},
            </if>
            <if test="retType != null">
                ret_type = #{retType,jdbcType=VARCHAR},
            </if>
            <if test="retPayType != null">
                ret_pay_type = #{retPayType,jdbcType=VARCHAR},
            </if>
            <if test="userRetType != null">
                user_ret_type = #{userRetType,jdbcType=VARCHAR},
            </if>
            <if test="serviceRetAlipay != null">
                service_ret_alipay = #{serviceRetAlipay,jdbcType=VARCHAR},
            </if>
            <if test="serviceRetAlipayName != null">
                service_ret_alipay_name = #{serviceRetAlipayName,jdbcType=VARCHAR},
            </if>
            <if test="serviceRetBank != null">
                service_ret_bank = #{serviceRetBank,jdbcType=VARCHAR},
            </if>
            <if test="serviceRetCardNum != null">
                service_ret_card_num = #{serviceRetCardNum,jdbcType=VARCHAR},
            </if>
            <if test="serviceRetCardName != null">
                service_ret_card_name = #{serviceRetCardName,jdbcType=VARCHAR},
            </if>
            <if test="serviceRetOpenBank != null">
                service_ret_open_bank = #{serviceRetOpenBank,jdbcType=VARCHAR},
            </if>
            <if test="retStatus != null">
                ret_status = #{retStatus,jdbcType=VARCHAR},
            </if>
            <if test="isEndNode != null">
                is_end_node = #{isEndNode,jdbcType=INTEGER},
            </if>
        </set>
        where
        retord_order_id = #{retordOrderId,jdbcType=VARCHAR}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.meiliwan.emall.oms.bean.Retord">
    update oms_retord
    set retord_order_id = #{retordOrderId,jdbcType=VARCHAR},
      old_order_id = #{oldOrderId,jdbcType=VARCHAR},
      create_type = #{createType,jdbcType=INTEGER},
      apply_comments = #{applyComments,jdbcType=VARCHAR},
      ret_pay_fare = #{retPayFare,jdbcType=DECIMAL},
      ret_pay_amount = #{retPayAmount,jdbcType=DECIMAL},
      ret_pay_compensate = #{retPayCompensate,jdbcType=DECIMAL},
      ret_total_amount = #{retTotalAmount,jdbcType=DECIMAL},
      ret_real_card_amount = #{retRealCardAmount,jdbcType=DECIMAL},
      ret_real_mlw_amount = #{retRealMlwAmount,jdbcType=DECIMAL},
      upload_pic = #{uploadPic,jdbcType=VARCHAR},
      user_retord_desc = #{userRetordDesc,jdbcType=VARCHAR},
      ret_time = #{retTime,jdbcType=TIMESTAMP},
      uid = #{uid,jdbcType=INTEGER},
      user_name = #{userName,jdbcType=VARCHAR},
      ad_recv_name = #{adRecvName,jdbcType=VARCHAR},
      ad_province = #{adProvince,jdbcType=VARCHAR},
      ad_province_code = #{adProvinceCode,jdbcType=VARCHAR},
      ad_city = #{adCity,jdbcType=VARCHAR},
      ad_city_code = #{adCityCode,jdbcType=VARCHAR},
      ad_county = #{adCounty,jdbcType=VARCHAR},
      ad_mobile = #{adMobile,jdbcType=VARCHAR},
      ad_county_code = #{adCountyCode,jdbcType=VARCHAR},
      ad_town = #{adTown,jdbcType=VARCHAR},
      ad_town_code = #{adTownCode,jdbcType=VARCHAR},
      ad_detail_addr = #{adDetailAddr,jdbcType=VARCHAR},
      ad_phone = #{adPhone,jdbcType=VARCHAR},
      update_time = #{updateTime,jdbcType=TIMESTAMP},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      state = #{state,jdbcType=INTEGER},
      remark = #{remark,jdbcType=VARCHAR},
      ret_type = #{retType,jdbcType=VARCHAR},
      ret_pay_type = #{retPayType,jdbcType=VARCHAR},
      user_ret_type = #{userRetType,jdbcType=VARCHAR},
      service_ret_alipay = #{serviceRetAlipay,jdbcType=VARCHAR},
      service_ret_alipay_name = #{serviceRetAlipayName,jdbcType=VARCHAR},
      service_ret_bank = #{serviceRetBank,jdbcType=VARCHAR},
      service_ret_card_num = #{serviceRetCardNum,jdbcType=VARCHAR},
      service_ret_card_name = #{serviceRetCardName,jdbcType=VARCHAR},
      service_ret_open_bank = #{serviceRetOpenBank,jdbcType=VARCHAR},
      ret_status = #{retStatus,jdbcType=VARCHAR} ,
       is_end_node = #{isEndNode,jdbcType=INTEGER}
    where id = #{id,jdbcType=INTEGER}
  </update>

    <sql id="selectCondition">
        <where>
            <trim suffixOverrides="and">
                <if test="entity != null">
                    <if test="entity.retordOrderId!=null">
                        and retord_order_id=#{entity.retordOrderId,jdbcType=VARCHAR}
                    </if>
                    <if test="entity.oldOrderId!=null">
                        and old_order_id=#{entity.oldOrderId,jdbcType=VARCHAR}
                    </if>
                    <if test="entity.createType!=null">
                        and create_type=#{entity.createType,jdbcType=INTEGER}
                    </if>
                    <if test="entity.uid!=null">
                        and uid=#{entity.uid,jdbcType=INTEGER}
                    </if>
                    <if test="entity.state!=null">
                        and state=#{entity.state,jdbcType=INTEGER}
                    </if>
                    <if test="entity.retType!=null">
                        and ret_type=#{entity.retType,jdbcType=VARCHAR}
                    </if>
                    <if test="entity.userRetType!=null">
                        and user_ret_type=#{entity.userRetType,jdbcType=VARCHAR}
                    </if>
                    <if test="entity.retStatus!=null">
                        and ret_status =#{entity.retStatus,jdbcType=VARCHAR}
                    </if>
                    <if test="entity.adMobile!=null">
                        and ad_mobile =#{entity.adMobile,jdbcType=VARCHAR}
                    </if>
                    <if test="entity.userName!=null">
                        and user_name =#{entity.userName,jdbcType=VARCHAR}
                    </if>
                    <if test="entity.isEndNode!=null">
                        and is_end_node =#{entity.isEndNode,jdbcType=INTEGER}
                    </if>
                </if>
            </trim>
            <trim suffixOverrides="and">
                <if test="whereSql!=null">
                    and ${whereSql}
                </if>
            </trim>
        </where>
    </sql>

    <!-- 根据条件查询 -->
    <select id="getListByEntityAndPageInfo"
            resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from oms_retord
        <include refid="selectCondition"/>
        <if test="orderBy!=null">
            ${orderBy}
        </if>
        <if test="pageInfo!=null">
            limit ${pageInfo.startIndex} ,${pageInfo.pagesize}
        </if>
    </select>

    <!-- 查询总数 -->
    <select id="getTotalByEntity"
            resultType="java.lang.Integer">
        select count(*) from oms_retord
        <include refid="selectCondition"/>
    </select>
    
    <select id="getRetOrderExcel" resultMap="RetOrdResultMap">
    	SELECT 
	    	ret.create_time, 
	    	ret.retord_order_id, 
	    	ret.old_order_id, 
	    	reti.pro_id, 
	    	reti.pro_bar_code, 
	    	reti.pro_name, 
	    	reti.uint_price, 
	    	reti.sale_num, 
	    	ret.ret_pay_fare, 
	    	ret.ret_pay_compensate, 
	    	ret.ret_total_amount, 
	    	ret.is_end_node
		FROM 
			mlw_order.oms_retord ret,
			mlw_order.oms_ordi reti
		WHERE 
			ret.retord_order_id = reti.order_id
		<if test="starTime != null">
	  	    and ret.create_time &gt;= #{starTime,jdbcType=TIMESTAMP}
	  	</if>
	  	<if test="endTime != null">
	  	    and ret.create_time &lt;= #{endTime,jdbcType=TIMESTAMP}
	  	</if>
		ORDER BY 
			ret.create_time DESC
    </select>
</mapper>