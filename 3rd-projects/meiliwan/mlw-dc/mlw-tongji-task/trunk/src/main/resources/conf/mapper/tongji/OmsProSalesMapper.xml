<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.meiliwan.emall.tongji.task.dao.oms.OmsProSalesDao">
    <resultMap id="BaseResultMap" type="com.meiliwan.emall.tongji.bean.oms.OmsProSales">
        <id column="id" property="id" jdbcType="INTEGER"/>
        <result column="pro_id" property="proId" jdbcType="INTEGER"/>
        <result column="bar_code" property="barCode" jdbcType="VARCHAR"/>
        <result column="pro_name" property="proName" jdbcType="VARCHAR"/>
        <result column="mlw_price" property="mlwPrice" jdbcType="DECIMAL"/>
        <result column="trade_price" property="tradePrice" jdbcType="DECIMAL"/>
        <result column="sell_stock" property="sellStock" jdbcType="INTEGER"/>
        <result column="daily_sales" property="dailySales" jdbcType="INTEGER"/>
        <result column="total_sales" property="totalSales" jdbcType="INTEGER"/>
        <result column="store_name" property="storeName" jdbcType="VARCHAR"/>
        <result column="avg_mlw_price" property="avgMlwPrice" jdbcType="DECIMAL"/>
        <result column="sales_amount" property="salesAmount" jdbcType="DECIMAL"/>
        <result column="profit_amount" property="profitAmount" jdbcType="DECIMAL"/>
        <result column="create_time" property="createTime" jdbcType="TIMESTAMP"/>
        <result column="sell_date" property="sellDate" jdbcType="INTEGER"/>
    </resultMap>
    <sql id="Base_Column_List">
    id, pro_id, bar_code, pro_name, mlw_price, trade_price, sell_stock, daily_sales,
    total_sales, store_name, avg_mlw_price, sales_amount, profit_amount, create_time,
    sell_date
    </sql>
    <sql id="selectConditionBean">
        <where>
            <if test="entity != null">
                <trim suffixOverrides="and">
                    <if test="entity.sellDate !=null">
                        and sell_date=#{entity.sellDate,jdbcType=INTEGER}
                    </if>
                    <if test="entity.storeName != null">
                        and store_name=#{entity.storeName,jdbcType=VARCHAR}
                    </if>
                    <if test="whereSql!=null">
                        and ${whereSql}
                    </if>
                </trim>
            </if>
        </where>
    </sql>
    <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer">
        select
        <include refid="Base_Column_List"/>
        from oms_pro_sales
        where id = #{id,jdbcType=INTEGER}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    delete from oms_pro_sales
    where id = #{id,jdbcType=INTEGER}
  </delete>
    <delete id="deleteByEntity" parameterType="com.meiliwan.emall.tongji.bean.oms.OmsProSales">
      delete from oms_pro_sales
      where sell_date=#{sellDate,jdbcType=INTEGER}
    </delete>
    <insert id="insert" parameterType="com.meiliwan.emall.tongji.bean.oms.OmsProSales" useGeneratedKeys="true"
            keyProperty="id">
    insert into oms_pro_sales (id, pro_id, bar_code,
      pro_name, mlw_price, trade_price,
      sell_stock, daily_sales, total_sales,
      store_name, avg_mlw_price, sales_amount,
      profit_amount, create_time, sell_date
      )
    values (#{id,jdbcType=INTEGER}, #{proId,jdbcType=INTEGER}, #{barCode,jdbcType=VARCHAR},
      #{proName,jdbcType=VARCHAR}, #{mlwPrice,jdbcType=DECIMAL}, #{tradePrice,jdbcType=DECIMAL},
      #{sellStock,jdbcType=INTEGER}, #{dailySales,jdbcType=INTEGER}, #{totalSales,jdbcType=INTEGER},
      #{storeName,jdbcType=VARCHAR}, #{avgMlwPrice,jdbcType=DECIMAL}, #{salesAmount,jdbcType=DECIMAL},
      #{profitAmount,jdbcType=DECIMAL}, #{createTime,jdbcType=TIMESTAMP}, #{sellDate,jdbcType=INTEGER}
      )
  </insert>
    <insert id="insertSelective" parameterType="com.meiliwan.emall.tongji.bean.oms.OmsProSales" useGeneratedKeys="true"
            keyProperty="id">
        insert into oms_pro_sales
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="id != null">
                id,
            </if>
            <if test="proId != null">
                pro_id,
            </if>
            <if test="barCode != null">
                bar_code,
            </if>
            <if test="proName != null">
                pro_name,
            </if>
            <if test="mlwPrice != null">
                mlw_price,
            </if>
            <if test="tradePrice != null">
                trade_price,
            </if>
            <if test="sellStock != null">
                sell_stock,
            </if>
            <if test="dailySales != null">
                daily_sales,
            </if>
            <if test="totalSales != null">
                total_sales,
            </if>
            <if test="storeName != null">
                store_name,
            </if>
            <if test="avgMlwPrice != null">
                avg_mlw_price,
            </if>
            <if test="salesAmount != null">
                sales_amount,
            </if>
            <if test="profitAmount != null">
                profit_amount,
            </if>
            <if test="createTime != null">
                create_time,
            </if>
            <if test="sellDate != null">
                sell_date,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="id != null">
                #{id,jdbcType=INTEGER},
            </if>
            <if test="proId != null">
                #{proId,jdbcType=INTEGER},
            </if>
            <if test="barCode != null">
                #{barCode,jdbcType=VARCHAR},
            </if>
            <if test="proName != null">
                #{proName,jdbcType=VARCHAR},
            </if>
            <if test="mlwPrice != null">
                #{mlwPrice,jdbcType=DECIMAL},
            </if>
            <if test="tradePrice != null">
                #{tradePrice,jdbcType=DECIMAL},
            </if>
            <if test="sellStock != null">
                #{sellStock,jdbcType=INTEGER},
            </if>
            <if test="dailySales != null">
                #{dailySales,jdbcType=INTEGER},
            </if>
            <if test="totalSales != null">
                #{totalSales,jdbcType=INTEGER},
            </if>
            <if test="storeName != null">
                #{storeName,jdbcType=VARCHAR},
            </if>
            <if test="avgMlwPrice != null">
                #{avgMlwPrice,jdbcType=DECIMAL},
            </if>
            <if test="salesAmount != null">
                #{salesAmount,jdbcType=DECIMAL},
            </if>
            <if test="profitAmount != null">
                #{profitAmount,jdbcType=DECIMAL},
            </if>
            <if test="createTime != null">
                #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="sellDate != null">
                #{sellDate,jdbcType=INTEGER},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.meiliwan.emall.tongji.bean.oms.OmsProSales">
        update oms_pro_sales
        <set>
            <if test="proId != null">
                pro_id = #{proId,jdbcType=INTEGER},
            </if>
            <if test="barCode != null">
                bar_code = #{barCode,jdbcType=VARCHAR},
            </if>
            <if test="proName != null">
                pro_name = #{proName,jdbcType=VARCHAR},
            </if>
            <if test="mlwPrice != null">
                mlw_price = #{mlwPrice,jdbcType=DECIMAL},
            </if>
            <if test="tradePrice != null">
                trade_price = #{tradePrice,jdbcType=DECIMAL},
            </if>
            <if test="sellStock != null">
                sell_stock = #{sellStock,jdbcType=INTEGER},
            </if>
            <if test="dailySales != null">
                daily_sales = #{dailySales,jdbcType=INTEGER},
            </if>
            <if test="totalSales != null">
                total_sales = #{totalSales,jdbcType=INTEGER},
            </if>
            <if test="storeName != null">
                store_name = #{storeName,jdbcType=VARCHAR},
            </if>
            <if test="avgMlwPrice != null">
                avg_mlw_price = #{avgMlwPrice,jdbcType=DECIMAL},
            </if>
            <if test="salesAmount != null">
                sales_amount = #{salesAmount,jdbcType=DECIMAL},
            </if>
            <if test="profitAmount != null">
                profit_amount = #{profitAmount,jdbcType=DECIMAL},
            </if>
            <if test="createTime != null">
                create_time = #{createTime,jdbcType=TIMESTAMP},
            </if>
            <if test="sellDate != null">
                sell_date = #{sellDate,jdbcType=INTEGER},
            </if>
        </set>
        where id = #{id,jdbcType=INTEGER}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.meiliwan.emall.tongji.bean.oms.OmsProSales">
    update oms_pro_sales
    set pro_id = #{proId,jdbcType=INTEGER},
      bar_code = #{barCode,jdbcType=VARCHAR},
      pro_name = #{proName,jdbcType=VARCHAR},
      mlw_price = #{mlwPrice,jdbcType=DECIMAL},
      trade_price = #{tradePrice,jdbcType=DECIMAL},
      sell_stock = #{sellStock,jdbcType=INTEGER},
      daily_sales = #{dailySales,jdbcType=INTEGER},
      total_sales = #{totalSales,jdbcType=INTEGER},
      store_name = #{storeName,jdbcType=VARCHAR},
      avg_mlw_price = #{avgMlwPrice,jdbcType=DECIMAL},
      sales_amount = #{salesAmount,jdbcType=DECIMAL},
      profit_amount = #{profitAmount,jdbcType=DECIMAL},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      sell_date = #{sellDate,jdbcType=INTEGER}
    where id = #{id,jdbcType=INTEGER}
  </update>

    <select id="getListByEntityAndPageInfo"
            resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from oms_pro_sales
        <include refid="selectConditionBean"/>
        <if test="orderBy!=null">
            ${orderBy}
        </if>
        <if test="pageInfo!=null">
            limit ${pageInfo.startIndex} ,${pageInfo.pagesize}
        </if>
    </select>

    <select id="getStoreDailySales" resultMap="BaseResultMap">
        SELECT store_name,SUM(sales_amount) AS sales_amount,SUM(daily_sales) AS daily_sales,SUM(profit_amount) AS
        profit_amount
        FROM oms_pro_sales
        <include refid="selectConditionBean"/>
        GROUP BY store_name
    </select>
</mapper>